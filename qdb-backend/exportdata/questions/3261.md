By using the PreparedStatement interface, we can store and retrieve
images. Create a table which contains two columns namely NAME and PHOTO.

CREATE TABLE \"IMGTABLE\"

(>\"NAME\" VARCHAR2(4000),

> \"PHOTO\" BLOB

)

Consider the following example to store the image in the database.

public class InsertImage {

> public static void main(String\[\] args) {

> > try {

> > > Class.forName(\"oracle.jdbc.driver.OracleDriver\");

> > > Connection con = DriverManager.getConnection(

> > > > \"jdbc:oracle:thin:@localhost:1521:xe\", \"system\",
> > > > \"oracle\");

> > > PreparedStatement ps = con.prepareStatement(\"insert into imgtable
> > > values(?,?)\");

> > > ps.setString(1, \"sonoo\");

> > > FileInputStream fin = new FileInputStream(\"d:\\\\g.jpg\");

> > > ps.setBinaryStream(2, fin, fin.available());

> > > int i = ps.executeUpdate();

> > > System.out.println(i + \" records affected\");

> > > con.close();

> > } catch (Exception e) {

> > > e.printStackTrace();

> > }

> }

}

Consider the following example to retrieve the image from the table.

public class RetrieveImage {

> public static void main(String\[\] args) {

> > try {

> > > Class.forName(\"oracle.jdbc.driver.OracleDriver\");

> > > Connection con = DriverManager.getConnection(

> > > > \"jdbc:oracle:thin:@localhost:1521:xe\", \"system\",
> > > > \"oracle\");

> > > PreparedStatement ps = con.prepareStatement(\"select \* from
> > > imgtable\");

> > > ResultSet rs = ps.executeQuery();

> > > if (rs.next()) { //now on 1st row

> > > > Blob b = rs.getBlob(2); //2 means 2nd column data

> > > > byte barr\[\] = b.getBytes(1, (int) b.length()); //1 means first
> > > > image

> > > > FileOutputStream fout = new
> > > > FileOutputStream(\"d:\\\\sonoo.jpg\");

> > > > fout.write(barr);

> > > > fout.close();

> > > } //end of if

> > > System.out.println(\"ok\");

> > > con.close();

> > } catch (Exception e) {

> > > e.printStackTrace();

> > }

> }

}